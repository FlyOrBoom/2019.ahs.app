<!DOCTYPE html>
<html>
  <head>
    <title>ahs.app</title>
    <link rel='shortcut icon' type='image/png' href='assets/favi.png' />
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta name='description' content='The no-bs Arcadia High School app'>
    <meta name='keywords' content='arcadia high school,ahs'>
    <meta name='author' content='Xing Liu'>
  	<link rel='manifest' href='pwa.webmanifest'>
  	<script>
if('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js')
}
  	</script>
    <style>
@import url('https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,500&display=swap');
*{
  box-sizing:border-box;
}
::selection{
  color:var(--background);
  background:var(--primary);
}
html{
  font-size:20px;
}
:root{
  --background:#fff;
  --shade:#eee;
  --primary:#f26;
  --link:#62f;
  --text:#444;
  --heading:#222;
}
html,body{
  margin:0;
  width:100%;
  height:100%;
}
body{
  background:var(--background);
  background-size:100% 100%;
  font-family:'IBM Plex Sans',monospace;
  font-weight:400;
  color:var(--text);
  text-transform:lowercase;
  cursor:default;
}
header{
  width:100%;
  margin-left:-.05rem;
  color:var(--primary);
  text-align:center;
  font-size:.75rem;
  font-weight:500;
}
header:focus{
  outline:none;
}
header{
}
main{
  scroll-snap-type:x mandatory;
  scroll-behavior:smooth;
  overflow:scroll;
  height:inherit;
  width:inherit;
  display:inline-flex;
}
section{
  scroll-snap-align:start;
  overflow:scroll;
  flex:0 0 50%;
  height:100%;
  position:relative;
  padding:1rem;
  border:solid var(--shade);
  border-width:0 .1rem;
}
section:first-child{
  flex:0 0 4rem;
}
section:first-child{
  border-left:none;
}
section:nth-of-type(2),section:nth-of-type(3){
  scroll-snap-align:none;
  flex:0 0 calc(50% - 4rem);
}
section>*{
  width:100%;
  margin-bottom:1rem;
}
h1{
  margin-top:-.25rem;
  font-weight:500;
  color:var(--heading);
}
#links{
  padding:.5rem;
}
#links>a,#links>button{
  background:none;
  border:0;
  fill:var(--primary);
  stroke:var(--primary);
  stroke-width:0;
  font-size:.7rem;
  font-weight:500;
  color:var(--primary);
  display:block;
  width:3rem;
  height:3rem;
  padding:.25rem;
  margin:0;
  cursor:pointer;
}

#links>a:hover,#links>a:focus,#links>button:hover,#links>button:focus{
  outline:none;
  background:var(--shade);
  fill:var(--link);
  stroke:var(--link);
  color:var(--link);
}

#section-select>input{
  display:none;
}
#section-select>label{
  display:block;
  padding:.1rem;
  margin:.2rem 0;
  text-align:center;
  cursor:pointer;
}
#section-select>label:hover{
  background:var(--shade);
}
#section-select>input:checked+label{
  background:var(--primary);
  font-weight:500;
  color:var(--background);
}
#section-select>input:checked+label:hover{
  color:var(--text);
}

#notepad{
  min-height:10rem;
  padding:.2rem;
  margin-bottom:1rem;
}
#notepad:focus{
  outline:none;
  border-width:.1rem;
}

.video,.pdf,#notepad,.schedule{
  border:solid .2rem var(--primary);
}
.schedule{
  table-layout:fixed;
  text-align:center;
}
tr.highlighted{
  color:var(--primary);
}
#schedule-select{
  all:unset;
  display:inline-flex;
  width:100%;
  justify-content:space-around;
}
#schedule-select:focus-within{
  background:#000;
}
#schedule-select>label{
  flex:1 0 1rem;
  text-align:center;
  color:var(--link);
  cursor:pointer;
  white-space:nowrap;
  overflow:hidden;
}
#schedule-select>input{
  display:none;
}
#schedule-select>label:hover,#schedule-select>input:focus+label{
  background:var(--shade);
}
#schedule-select>input:checked+label{
  color:var(--background);
  background:var(--primary);
  font-weight:500;
  -webkit-mask-image:none;
  mask-image:none;
}
.pdf{
  height:calc(100% - 3.5rem);
}
.video{
  height:28.125vw;
}
a{
  text-decoration:none;
  color:var(--link);
}
a:hover,a:focus{
  outline:none;
  color:var(--primary);
}
a:visited{
  color:var(--link);
  filter:brightness(.8);
}
.feed-item-title{
  width:92%;
  margin-left:2%;
}
.feed-item-desc{
  width:92%;
  margin-left:4%;
}
.twitter-timeline{
  clip-path:inset(4vw 0 0 0);
  transform:translateY(-4vw);
}
@media screen and (pointer:coarse){
  #links{
    padding-top:3rem;
  }
}
@media screen and (max-width:800px){
  section{
    flex:0 0 100vw;
  }
  section:nth-of-type(2),section:nth-of-type(3){
    flex:0 0 calc(100vw - 4rem);
  }
  .video{
    height:54.25vw;
  }
  .twitter-timeline{
    clip-path:inset(8vw 0 0 0);
    transform:translateY(-8vw);
    color:var(--text);
  }
}
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}
@media (prefers-color-scheme: dark) {
  :root{
    --primary:#f37;
    --link:#86f;
    --background:#141414;
    --shade:#000;
    --text:#ddd;
    --heading:#fff;
  }
}

    </style>
  </head>
  <body>
    <main>
      <section id='links'>
        <h1 hidden>Quick links</h1>
        <button id='logo-button' title='install ahs.app'>
          <svg viewBox='0 0 32 32' text-anchor='middle'>
            <text y='13.5' x='50%' width='100%'>ahs</text>
            <circle cx='50%' cy='50%' r='1'/>
            <text y='26' x='50%'>app</text>
            <path id='install-pwa' d='M29 0v6M32 3h-6'/>
          </svg>
        </button>
        <a target='_blank' href='https://classroom.google.com' title='google classroom'>
<svg viewBox='-5 -5 60 60'><path d='M 6 5 C 3.792969 5 2 6.792969 2 9 L 2 41 C 2 43.207031 3.792969 45 6 45 L 44 45 C 46.207031 45 48 43.207031 48 41 L 48 9 C 48 6.792969 46.207031 5 44 5 Z M 7 9 L 43 9 C 43.554688 9 44 9.449219 44 10 L 44 40 C 44 40.554688 43.554688 41 43 41 L 7 41 C 6.449219 41 6 40.554688 6 40 L 6 10 C 6 9.449219 6.449219 9 7 9 Z M 8 11 L 8 39 L 29 39 L 29 37 L 38 37 L 38 39 L 42 39 L 42 11 Z M 25 18 C 26.65625 18 28 19.34375 28 21 C 28 22.65625 26.65625 24 25 24 C 23.34375 24 22 22.65625 22 21 C 22 19.34375 23.34375 18 25 18 Z M 17 22 C 18.105469 22 19 22.894531 19 24 C 19 25.105469 18.105469 26 17 26 C 15.894531 26 15 25.105469 15 24 C 15 22.894531 15.894531 22 17 22 Z M 33 22 C 34.105469 22 35 22.894531 35 24 C 35 25.105469 34.105469 26 33 26 C 31.894531 26 31 25.105469 31 24 C 31 22.894531 31.894531 22 33 22 Z M 25 27 C 27.125 27 28.941406 27.890625 30 28.5625 L 30 32 L 20 32 L 20 28.5625 C 21.058594 27.890625 22.875 27 25 27 Z M 17 28.65625 C 17.347656 28.65625 17.679688 28.71875 18 28.78125 L 18 32 L 13 32 L 13 30.1875 C 13 30.1875 14.742188 28.65625 17 28.65625 Z M 33 28.65625 C 35.257812 28.65625 37 30.1875 37 30.1875 L 37 32 L 32 32 L 32 28.78125 C 32.320312 28.71875 32.652344 28.65625 33 28.65625 Z M 33 28.65625 '/></svg>
        </a>
        <a target='_blank' href='https://drive.google.com' title='google drive'>
<svg viewBox='0 1 32 32'><path d='M 11.4375 5 L 11.15625 5.46875 L 3.15625 18.46875 L 2.84375 18.96875 L 3.125 19.5 L 7.125 26.5 L 7.40625 27 L 24.59375 27 L 24.875 26.5 L 28.875 19.5 L 29.15625 18.96875 L 28.84375 18.46875 L 20.84375 5.46875 L 20.5625 5 Z M 13.78125 7 L 19.4375 7 L 26.21875 18 L 20.5625 18 Z M 12 7.90625 L 14.96875 12.75 L 8.03125 24.03125 L 5.15625 19 Z M 16.15625 14.65625 L 18.21875 18 L 14.09375 18 Z M 12.875 20 L 26.28125 20 L 23.40625 25 L 9.78125 25 Z'/></svg>
        </a>
        <a target='_blank' href='https://mail.google.com' title='gmail'>
<svg viewBox='-5 -4 60 60'><path d='M 5.5 7 C 3.019531 7 1 9.019531 1 11.5 L 1 11.925781 L 25 29 L 49 11.925781 L 49 11.5 C 49 9.019531 46.980469 7 44.5 7 Z M 6.351563 9 L 43.644531 9 L 25 22 Z M 1 14.027344 L 1 38.5 C 1 40.980469 3.019531 43 5.5 43 L 44.5 43 C 46.980469 43 49 40.980469 49 38.5 L 49 14.027344 L 43 18.296875 L 43 41 L 7 41 L 7 18.296875 Z'/></svg>
        </a>
        <a target='_blank' href='https://powerschool.ausd.net' title='powerschool'>
<svg viewBox='-9 -3 38 38' stroke-width='2' fill='none'><path d='M1 32V1H4V31H7V1H10A10 10 0 0 1 10 22V19A6 6 0 0 0 10 4V7A2 2 0 0 1 10 16H9'/></svg>
        </a>
        <!--<a target='_blank' href='https://student.naviance.com/arcadiahs' title='Naviance'></a>-->
      </section>
      <section id='edit' hidden>
        
        <h1>edit sections</h1>
        
        <form id='section-select'>
          
          <input type='checkbox' name='section-select' id='section-select-agenda' value='0' checked>
          <label for='section-select-agenda'>agenda</label>
          
          <input type='checkbox' name='section-select' id='section-select-bulletin'  value='1' checked>
          <label for='section-select-bulletin'>bulletin</label>

          <input type='checkbox' name='section-select' id='section-select-apn'  value='2' checked>
          <label for='section-select-apn'>apn</label>

          <input type='checkbox' name='section-select' id='section-select-powwow'  value='3' checked>
          <label for='section-select-powwow'>powwow</label>

          <input type='checkbox' name='section-select' id='section-select-contacts'  value='4' checked>
          <label for='section-select-contacts'>contacts</label>

          <input type='checkbox' name='section-select' id='section-select-twitter'  value='5'>
          <label for='section-select-twitter'>twitter</label>

          <input type='checkbox' name='section-select' id='section-select-instagram'  value='6'>
          <label for='section-select-instagram'>instagram</label>

        </form>
        
        <div>an app by <a href='lxing.dev'>xing</a></div>
        
      </section>
      <section id='agenda'>
        <h1>agenda</h1>
        <div id='notepad' contenteditable></div>
        <form id='schedule-select'>

          <input type='radio' name='schedule-select' id='schedule-select-normal' value='normal' checked>
          <label for='schedule-select-normal'>normal</label>

          <input type='radio' name='schedule-select' id='schedule-select-wed' value='wed'>
          <label for='schedule-select-wed'>late start</label>

          <input type='radio' name='schedule-select' id='schedule-select-mini' value='mini'>
          <label for='schedule-select-mini'>collab day</label>

          
        </form>
        <table class='schedule' id='schedule-normal'>
          <tr>
            <td>1</td>
            <td>08:00</td>
            <td>08:57</td>
          </tr>
          <tr>
            <td>2</td>
            <td>09:04</td>
            <td>10:01</td>
          </tr>
          <tr>
            <td>3</td>
            <td>10:08</td>
            <td>11:05</td>
          </tr>
          <tr>
            <td>4</td>
            <td>11:12</td>
            <td>12:11</td>
          </tr>
          <tr>
            <td>Lunch</td>
            <td>12:11</td>
            <td>12:52</td>
          </tr>
          <tr>
            <td>5</td>
            <td>12:59</td>
            <td>01:56</td>
          </tr>
          <tr>
            <td>6</td>
            <td>02:03</td>
            <td>03:00</td>
          </tr>
        </table>
        <table class='schedule' id='schedule-wed' hidden>
          <tr>
            <td>1</td>
            <td>09:00</td>
            <td>09:47</td>
          </tr>
          <tr>
            <td>2</td>
            <td>09:54</td>
            <td>10:41</td>
          </tr>
          <tr>
            <td>3</td>
            <td>10:48</td>
            <td>11:35</td>
          </tr>
          <tr>
            <td>4</td>
            <td>11:42</td>
            <td>12:31</td>
          </tr>
          <tr>
            <td>Lunch</td>
            <td>12:31</td>
            <td>01:12</td>
          </tr>
          <tr>
            <td>5</td>
            <td>01:19</td>
            <td>02:06</td>
          </tr>
          <tr>
            <td>6</td>
            <td>02:13</td>
            <td>03:00</td>
          </tr>
        </table>
        <table class='schedule' id='schedule-mini' hidden>
          <tr>
            <td>1</td>
            <td>08:00</td>
            <td>08:30</td>
          </tr>
          <tr>
            <td>2</td>
            <td>08:37</td>
            <td>09:07</td>
          </tr>
          <tr>
            <td>3</td>
            <td>09:14</td>
            <td>09:44</td>
          </tr>
          <tr>
            <td>4</td>
            <td>09:51</td>
            <td>10:26</td>
          </tr>
          <tr>
            <td>5</td>
            <td>10:33</td>
            <td>11:03</td>
          </tr>
          <tr>
            <td>6</td>
            <td>11:10</td>
            <td>11:40</td>
          </tr>
        </table>
        <div id='time'></div>
      </section>
      <section id='bulletin'>
        <h1>bulletin</h1>
        <object class='pdf' data='assets/bulletin.pdf'></object>
      </section>
      <section id='apn'>
        <h1>apache news</h1>
        <embed class='video' src='https://www.youtube-nocookie.com/embed/live_stream?channel=UC6G_LCSmfd9q34BMao87E0g'/>
      </section>
      <section id='powwow'>
        <h1>pow wow</h1>
        <div id='powwow-feed'>
          <script src='https://rss.bloople.net/?url=https%3A%2F%2Ftheapachepowwow.net%2Ffeed&amp;showtitle=false&amp;type=js' defer></script>
        </div>
        <div>read more at the <a href='https://theapachepowwow.net'>apache pow wow</a> website.</div>
      </section>
      <section id='contacts'></section>
      <section id='twitter' hidden>
        <h1>twitter</h1>
        <a class='twitter-timeline' data-dnt='true' data-link-color='#42f' href='https://twitter.com/ArcadiaASB?ref_src=twsrc%5Etfw'>Tweets by ArcadiaASB</a> <script src='https://platform.twitter.com/widgets.js' charset='utf-8' async></script>
      </section>
      <section id='instagram' hidden></section>
    </main>
    <script>
const doc = document,
      date = new Date(),
      dom = {
        date:             doc.getElementById('time'),
        powwowFeed:       doc.getElementById('powwow-feed'),
        notepad:          doc.getElementById('notepad'),
        scheduleSelector: doc.getElementById('schedule-select'),
        schedule:         doc.getElementsByClassName('schedule'),
        main:             doc.getElementsByTagName('main')[0],
        sectionSelector:  doc.getElementById('section-select'),
        sectionSelectorInputs: Array.from(doc.querySelectorAll('#section-select>input')),
        section:          Array.from(doc.getElementsByTagName('section')),
        logoButton:       doc.getElementById('logo-button')
      },
      preferences = {
        darkMode: false,
        hidden:   window.localStorage.getItem('hidden') ? JSON.parse(window.localStorage.getItem('hidden')) : [false,false,false,false,false,true,true],
        notepad:  window.localStorage.getItem('notepad') ? window.localStorage.getItem('notepad') : 'write stuff here. everything is auto-saved locally on your computer.'
      },
      edit = () =>{
        dom.section[1].hidden=!dom.section[1].hidden
      },
      sync = {
        hidden: (sectionInt,flip)=>{
          let isHidden = flip ? !preferences.hidden[sectionInt] : preferences.hidden[sectionInt]
          preferences.hidden[sectionInt] = isHidden
          dom.section[sectionInt+2].hidden = isHidden
          window.localStorage.setItem('hidden',JSON.stringify(preferences.hidden))
        }
      }

let deferredPrompt

dom.sectionSelectorInputs.forEach((input,index)=>{
  input.checked = !preferences.hidden[index]
  sync.hidden(index,false)
})

dom.sectionSelector.addEventListener('input',(e)=>{
  let sectionInt = parseInt(e.target.value)
  sync.hidden(sectionInt,true)
})

window.addEventListener('beforeinstallprompt',(e)=>{
  deferredPrompt = e
})

dom.logoButton.addEventListener('click',()=>{
  deferredPrompt ? deferredPrompt.prompt() : edit()
})

dom.date.innerHTML = date.toLocaleDateString('en-US', {weekday:'long',month:'numeric', day:'numeric'})

if(dom.powwowFeed.innerText){
  window.localStorage.setItem('powwowFeed',dom.powwowFeed.innerHTML.slice(0,-134))
}else if(window.localStorage.getItem('powwowFeed')){
  dom.powwowFeed.innerHTML = window.localStorage.getItem('powwowFeed')
}else{
  dom.powwowFeed.innerText = 'Cannot load feed.'
}

dom.notepad.innerText = preferences.notepad

dom.notepad.addEventListener('keyup',()=>{
  window.localStorage.setItem('notepad',dom.notepad.innerText)
})

if(date.getDay() === 3){
  doc.getElementById('schedule-select-wed').checked = true;
  Array.from(dom.schedule).forEach((f)=>{
    f.hidden = (f !== doc.getElementById('schedule-wed'))
  })
}

dom.scheduleSelector.addEventListener('input',function(e){
  Array.from(dom.schedule).forEach((f)=>{
    f.hidden = (f !== doc.getElementById('schedule-'+e.target.value))
  })
})

setInterval(function(){
  Array.from(dom.schedule[1].children).reverse.forEach((e)=>{
    // alert(e.children[1].innerText);
  })
},2000)
    </script>
  </body>
</html>