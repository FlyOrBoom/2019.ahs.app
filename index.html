<!DOCTYPE html>
<html>
  <head>
    <title>ahs.app</title>
    <link rel='shortcut icon' type='image/png' href='assets/favi.png' />
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta name='description' content='The no-bs Arcadia High School app'>
    <meta name='keywords' content='arcadia high school,ahs'>
    <meta name='author' content='Xing Liu'>
  	<link rel="manifest" href="pwa.webmanifest">
    <style>
@import url('https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,500&display=swap');
*{
  box-sizing:border-box;
}
html{
  font-size:22px;
}
:root{
  --primary:#f26;
  --secondary:#62f;
  --shade:#eee;
  --background:#fff;
  --main:#222;
}
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
}
body{
  background:var(--shade);
  background-size:100% 100%;
  font-family:'IBM Plex Sans',monospace;
  font-weight:400;
  color:var(--main);
}
header{
  width:100%;
  height:1.25rem;
  top:-.25rem;
  background:var(--primary);
  color:var(--background);
  text-align:center;
  position:fixed;
  z-index:100;
}
header,nav{
  font-weight:500;
}
nav{
  bottom:0;
  width:100vw;
  height:1.25rem;
  position:fixed;
  z-index:100;
  background:var(--shade);
  display:flex;
}
nav>a{
  flex:1 1 1rem;
  text-align:center;
}
nav>a:hover,nav>a:focus{
  background:var(--primary);
  color:var(--background) !important;
}
#time{
  position:absolute;
  left:0;
  text-transform:lowercase;
  font-weight:400;
}
#credit{
  text-decoration:none;
  color:var(--background);
  position:absolute;
  right:0;
  font-weight:400;
  opacity:.8;
}
#credit:hover{
  opacity:1;
}
main{
  position:fixed;
  scroll-snap-type:x mandatory;
  overflow-x:scroll;
  overflow-y:hidden;
  width:100vw;
  top:1rem;
  height:calc(100% - 2.25rem);
  display:flex;
  scroll-behavior:smooth;
}
section{
  scroll-snap-align:start;
  overflow-x:hidden;
  overflow-y:scroll;
  flex:0 0 50vw;
  height:100%;
  background:var(--background);
  position:relative;
  padding:1rem;
  display:block;
  border:solid var(--shade);
  border-width:0 .1rem;
}
section:first-child,section:last-child{
  flex:0 0 4rem;
}
section:first-child{
  border-left:none;
}
section:last-child{
  border-right:none;
}
section:nth-child(2),section:nth-last-child(2){
  scroll-snap-align:none;
  flex:0 0 calc(50vw - 4rem);
}
section>*{
  width:100%;
}
h1{
  margin:0 0 1rem 0;
  font-weight:500;
}
#links{
  padding-top:.5rem;
}
#links>*{
  fill:#fff;
  display:block;
  width:3.5rem;
  height:3.5rem;
  margin:0 0 0 -.75rem;
  border-radius:50%;
  background-color:var(--primary);
  color:var(--background);
  padding:.25rem;
  border:.5rem solid var(--background);
}
#links>*:hover,#links>*:focus{
  background-color:var(--secondary);
}
#notepad{
  min-height:10rem;
  padding:.2rem;
}
#notepad:focus{
  outline:none;
  border-width:.1rem;
}
.video,.pdf,#notepad{
  border:solid .2rem var(--primary);
}
.pdf{
  height:calc(100% - 3.5rem);
}
.video{
  height:28.125vw;
}
a{
  text-decoration:none;
  color:var(--secondary);
}
a:hover,a:focus{
  outline:none;
  color:var(--primary);
}
a:visited{
  color:var(--secondary);
  filter:brightness(.8);
}
.feed-item-title{
  width:92%;
  margin-left:2%;
}
.feed-item-desc{
  width:92%;
  margin-left:4%;
  opacity:.75;
}
@media screen and (max-width:700px){
  html{
    font-size:24px;
  }
  header{
    text-align:left;
  }
  nav>a{
    -webkit-mask-image:linear-gradient(90deg,#fff 50%,#fff8);
  }
  #time{
    display:none;
  }
  section{
    flex:0 0 100vw;
  }
  section:nth-child(2),section:nth-last-child(2){
    flex:0 0 calc(100vw - 4rem);
  }
  .video{
    height:54.25vw;
  }
}
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}
@media (prefers-color-scheme: dark) {
  :root{
    --primary:#f37;
    --secondary:#86f;
    --background:#111;
    --shade:#000;
    --main:#fff;
  }
}
    </style>
  </head>
  <body>
    <nav>
      <a tabindex='100' href='#links'>Quick links</a>
      <a href='#agenda'>Agenda</a>
      <a href='#bulletin'>Bulletin</a>
      <a href='#apn'>Apache News</a>
      <a href='#powwow'>PowWow</a>
      <a href='#social'>Social media</a>
      <a href='#preferences'>Preferences</a>
    </nav>
    <header tabindex='0'><span id='time'></span>ahs.app<a href='https://lxing.dev' id='credit'>by xing</a></header>
    <main>
      <section id='links'>
        <a href='https://classroom.google.com' title='Google Classroom'>
<svg viewBox='-5 -5 60 60' version='1.1'>
<path d='M 6 5 C 3.792969 5 2 6.792969 2 9 L 2 41 C 2 43.207031 3.792969 45 6 45 L 44 45 C 46.207031 45 48 43.207031 48 41 L 48 9 C 48 6.792969 46.207031 5 44 5 Z M 7 9 L 43 9 C 43.554688 9 44 9.449219 44 10 L 44 40 C 44 40.554688 43.554688 41 43 41 L 7 41 C 6.449219 41 6 40.554688 6 40 L 6 10 C 6 9.449219 6.449219 9 7 9 Z M 8 11 L 8 39 L 29 39 L 29 37 L 38 37 L 38 39 L 42 39 L 42 11 Z M 25 18 C 26.65625 18 28 19.34375 28 21 C 28 22.65625 26.65625 24 25 24 C 23.34375 24 22 22.65625 22 21 C 22 19.34375 23.34375 18 25 18 Z M 17 22 C 18.105469 22 19 22.894531 19 24 C 19 25.105469 18.105469 26 17 26 C 15.894531 26 15 25.105469 15 24 C 15 22.894531 15.894531 22 17 22 Z M 33 22 C 34.105469 22 35 22.894531 35 24 C 35 25.105469 34.105469 26 33 26 C 31.894531 26 31 25.105469 31 24 C 31 22.894531 31.894531 22 33 22 Z M 25 27 C 27.125 27 28.941406 27.890625 30 28.5625 L 30 32 L 20 32 L 20 28.5625 C 21.058594 27.890625 22.875 27 25 27 Z M 17 28.65625 C 17.347656 28.65625 17.679688 28.71875 18 28.78125 L 18 32 L 13 32 L 13 30.1875 C 13 30.1875 14.742188 28.65625 17 28.65625 Z M 33 28.65625 C 35.257812 28.65625 37 30.1875 37 30.1875 L 37 32 L 32 32 L 32 28.78125 C 32.320312 28.71875 32.652344 28.65625 33 28.65625 Z M 33 28.65625 '/>
</svg>
        </a>
        <a href='https://classroom.google.com' title='Google Drive'>
<svg viewBox='0 1 32 32'><path d='M 11.4375 5 L 11.15625 5.46875 L 3.15625 18.46875 L 2.84375 18.96875 L 3.125 19.5 L 7.125 26.5 L 7.40625 27 L 24.59375 27 L 24.875 26.5 L 28.875 19.5 L 29.15625 18.96875 L 28.84375 18.46875 L 20.84375 5.46875 L 20.5625 5 Z M 13.78125 7 L 19.4375 7 L 26.21875 18 L 20.5625 18 Z M 12 7.90625 L 14.96875 12.75 L 8.03125 24.03125 L 5.15625 19 Z M 16.15625 14.65625 L 18.21875 18 L 14.09375 18 Z M 12.875 20 L 26.28125 20 L 23.40625 25 L 9.78125 25 Z'/></svg>
        </a>
        <a href='https://classroom.google.com' title='Gmail'>
<svg viewBox="-5 -4 60 60"><path d="M 5.5 7 C 3.019531 7 1 9.019531 1 11.5 L 1 11.925781 L 25 29 L 49 11.925781 L 49 11.5 C 49 9.019531 46.980469 7 44.5 7 Z M 6.351563 9 L 43.644531 9 L 25 22 Z M 1 14.027344 L 1 38.5 C 1 40.980469 3.019531 43 5.5 43 L 44.5 43 C 46.980469 43 49 40.980469 49 38.5 L 49 14.027344 L 43 18.296875 L 43 41 L 7 41 L 7 18.296875 Z"/></svg>
        </a>
        <a href='https://powerschool.ausd.net' title='PowerSchool'>Pow</a>
        <a href='https://student.headeriance.com/arcadiahs' title='Naviance'>Na</a>
      </section>
      <section id='agenda'>
        <h1>Agenda</h1>
        <div id='notepad' contenteditable></div>
      </section>
      <section id='bulletin'>
        <h1>Bulletin</h1>
        <iframe class='pdf' src='https://4.files.edl.io/4db1/11/15/19/231854-6f667b17-6681-4505-8ec4-0279f304acc8.pdf'></iframe>
      </section>
      <section id='apn'>
        <h1>Apache News</h1>
        <embed class='video' src='https://www.youtube-nocookie.com/embed/live_stream?channel=UC6G_LCSmfd9q34BMao87E0g'/>
      </section>
      <section id='powwow'>
        <h1>Pow Wow</h1>
        <div id='powwow-feed'>
          <script src='https://rss.bloople.net/?url=https%3A%2F%2Ftheapachepowwow.net%2Ffeed&amp;showtitle=false&amp;type=js'></script>
        </div>
        <div>Read more at the <a href='https://theapachepowwow.net'>Apache Pow Wow</a> website.</div>
      </section>
      <section id='social'>
        <h1>Social media</h1>
      </section>
      <section id='preferences'>
      </section>
    </main>
    <script>
const doc = document,
      dom = {
        date:doc.getElementById('time'),
        powwowFeed:doc.getElementById('powwow-feed'),
        notepad:doc.getElementById('notepad'),
        main:doc.getElementsByTagName('main')[0]
      },
      preferences = {
        darkMode:false,
        arrangement:['agenda','bulletin','apn','powwow','social','preferences']
      };

const debounce = (callback, time) => {
  let interval;
  return (...args) => {
    clearTimeout(interval);
    interval = setTimeout(() => {
      interval = null;
      callback(...args);
    }, time);
  };
};

if(dom.powwowFeed.innerText){
  window.localStorage.setItem('powwowFeed',dom.powwowFeed.innerHTML.slice(0,-134));
}else if(window.localStorage.getItem('powwowFeed')){
  dom.powwowFeed.innerHTML = window.localStorage.getItem('powwowFeed');
}else{
  dom.powwowFeed.innerText = 'Cannot load feed.';
}

if(window.localStorage.getItem('notepad')){
  dom.notepad.innerText = window.localStorage.getItem('notepad');
}

dom.date.innerText = new Date().toLocaleDateString('en-US', {hour12: true, month:'numeric', day:'numeric', weekday:'long'});

dom.notepad.addEventListener('keyup',function(e){
  window.localStorage.setItem('notepad',this.innerText);
});

dom.main.addEventListener('scroll',function(){
  Array.from(doc.getElementsByTagName('section')).forEach(function(f){
    if(Math.abs(f.getBoundingClientRect().left)<50){
      if(f.id==='links'){
        window.history.pushState({},'ahs.app',' ');
      }else{
        window.history.pushState({},'ahs.app','#'+f.id);
      }
    }
  });
});

doc.querySelectorAll(`*[href^='#']`).forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    this.blur();
    doc.querySelector(this.getAttribute('href')).scrollIntoView({
      inline:'start'
    });
    window.history.pushState({},'ahs.app',anchor.getAttribute('href'));
  });
});

    </script>
  </body>
</html>